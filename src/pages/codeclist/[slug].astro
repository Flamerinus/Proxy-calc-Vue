---
import Layout from "@/layouts/Layout.astro";
import "@/styles/globals.css";
import {
  Breadcrumb,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbList,
  BreadcrumbPage,
  BreadcrumbSeparator,
} from "@/components/ui/breadcrumb";
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip";
import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";

import Selector from "@/components/Selector.vue";

import { getCollection, type CollectionEntry } from "astro:content";

export const getStaticPaths = async () => {
  const codecs = await getCollection("codecs");
  const paths = codecs.map((codec) => {
    return {
      params: {
        slug: codec.slug,
      },
      props: {
        codec,
      },
    };
  });
  return paths;
};

type Props = {
  codec: CollectionEntry<"codecs">;
};

const { codec } = Astro.props;

//console.dir(codec, { depth: null });
---

<Layout title={"Proxy Calc > " + codec.data.title}>
  <main>
    <Breadcrumb>
      <BreadcrumbList>
        <BreadcrumbItem>
          {
            (
              // @ts-ignore
              <BreadcrumbLink href="/">Home</BreadcrumbLink>
            )
          }
        </BreadcrumbItem>
        <BreadcrumbSeparator />
        <BreadcrumbItem>
          <BreadcrumbPage>{codec.data.title}</BreadcrumbPage>
        </BreadcrumbItem>
      </BreadcrumbList>
    </Breadcrumb>

    <div class="w-full inline-flex justify-items-center">
      <Card
        class="my-2 mx-auto w-full sm:w-4/5 md:w-3/5 lg:w-2/5 xl:w-2/5 2xl:w-2/5 min-w-80"
      >
        <CardHeader class="text-center">
          <CardTitle>{codec.data.name}</CardTitle>
          <CardDescription>Bitrate: {codec.data.bitrate}</CardDescription>
        </CardHeader>
        <CardContent>
          <Selector resolvalues={codec} client:load />
        </CardContent>
        <CardFooter>
          <p>ProxyCalc</p>
        </CardFooter>
      </Card>
    </div>

    Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci fugit nulla, officia laudantium id voluptatibus ab voluptate debitis veritatis modi odit totam recusandae cupiditate, neque quaerat nam, similique labore explicabo.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci fugit nulla, officia laudantium id voluptatibus ab voluptate debitis veritatis modi odit totam recusandae cupiditate, neque quaerat nam, similique labore explicabo.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci fugit nulla, officia laudantium id voluptatibus ab voluptate debitis veritatis modi odit totam recusandae cupiditate, neque quaerat nam, similique labore explicabo.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci fugit nulla, officia laudantium id voluptatibus ab voluptate debitis veritatis modi odit totam recusandae cupiditate, neque quaerat nam, similique labore explicabo.

  </main>
</Layout>
